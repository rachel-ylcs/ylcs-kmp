cmake_minimum_required(VERSION 3.10.0)

project(picker)

find_package(Java COMPONENTS Runtime Development)
if(NOT Java_FOUND)
    message(FATAL_ERROR "picker requires Java to build!")
    return()
endif()
find_package(JNI REQUIRED)

add_library(picker SHARED
    main.cpp
)

target_include_directories(picker PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}
    ${JNI_INCLUDE_DIRS}
)

IF (WIN32)
    target_compile_definitions(picker PUBLIC UNICODE)
    target_compile_definitions(picker PUBLIC _UNICODE)
ENDIF()

set_target_properties(picker PROPERTIES
    CXX_STANDARD 20
    CXX_EXTENSIONS OFF
)

target_link_libraries(picker ${JNI_LIBRARIES})